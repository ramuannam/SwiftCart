<!DOCTYPE html>
<html>
  <head>
    <title>Weather App</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
        font-family: Arial, sans-serif;
        margin: 0;
      }
      #app {
        display: flex;
        width: 100%;
        max-width: 1200px;
        height: 100vh;
      }
      #map {
        flex: 2;
        height: 100%;
      }
      #weather-info {
        flex: 1;
        padding: 20px;
        box-sizing: border-box;
        background-color: #f7f7f7;
        border-left: 1px solid #ddd;
      }
      #weather-info h2 {
        margin-top: 0;
      }
    </style>
  </head>
  <body>
    <h1>Weather App</h1>
    <div id="app">
      <div id="map"></div>
      <div id="weather-info">
        <h2>Weather Information</h2>
        <p>Select a location on the map to see the weather data.</p>
        <div id="weather-details"></div>
      </div>
    </div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
      // Initialize the map
      var map = L.map("map").setView([20.5937, 78.9629], 5); // Centered on India

      // Set up the tile layer (OpenStreetMap tiles)
      L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png", {
        attribution:
          'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
      }).addTo(map);

      // Function to fetch weather data
      function fetchWeather(lat, lon) {
        // Use your weather API URL here
        var apiUrl = `https://api.weatherapi.com/v1/current.json?key=YOUR_API_KEY&q=${lat},${lon}`;
        fetch(apiUrl)
          .then((response) => response.json())
          .then((data) => {
            var weatherDetails = `
                        <h3>${data.location.name}, ${data.location.region}, ${data.location.country}</h3>
                        <p><strong>Temperature:</strong> ${data.current.temp_c} Â°C</p>
                        <p><strong>Condition:</strong> ${data.current.condition.text}</p>
                        <img src="${data.current.condition.icon}" alt="Weather Icon">
                        <p><strong>Humidity:</strong> ${data.current.humidity}%</p>
                        <p><strong>Wind Speed:</strong> ${data.current.wind_kph} kph</p>
                    `;
            document.getElementById("weather-details").innerHTML =
              weatherDetails;
          })
          .catch((error) => {
            console.error("Error fetching weather data:", error);
            document.getElementById("weather-details").innerHTML =
              "<p>Error fetching weather data.</p>";
          });
      }

      // Event listener for map clicks
      map.on("click", function (e) {
        var lat = e.latlng.lat;
        var lon = e.latlng.lng;
        fetchWeather(lat, lon);
      });
    </script>
  </body>
</html>
